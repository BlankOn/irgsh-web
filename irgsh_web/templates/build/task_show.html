{% extends "build/base.html" %}
{% load i18n %}
{% load irgsh_tags %}

{% block content %}
<div id="task-page">
<h1>{% blocktrans with task.task_id as task_id %}Build task <code>{{ task_id }}</code>{% endblocktrans %}</h1>

<table class="vertical" id="task-info">
<tr><th>{% trans "Task ID" %}</th>
    <td class="code">{{ task.task_id }}</td>
</tr>
<tr><th>{% trans "Task status" %}</th>
    <td>{{ task.get_status_display }}</td>
</tr>
<tr><th>{% trans "Build" %}</th>
    <td><a href="{{ build.get_absolute_url }}">{{ build.id }}</a>
        {% if build.package %}&rarr; {{ build.package.name }}_{{ build.version }}{% endif %}</td>
</tr>
<tr><th>{% trans "Created" %}</th>
    <td>{{ task.created|datetime_and_age }}</td>
</tr>
<tr><th>{% trans "Last update" %}</th>
    <td>{{ task.updated|datetime_and_since:task.created }}</td>
</tr>
<tr><th>{% trans "Architecture" %}</th>
    <td>{{ task.architecture.name }}</td>
</tr>
<tr><th>{% trans "Builder" %}</th>
    <td>{% if task.builder %}<a href="{{ task.builder.get_absolute_url }}">{{ task.builder.name }}</a>{% endif %}</td>
</tr>
<tr><th>{% trans "Assigned" %}</th>
    <td>{% if task.assigned %}{{ task.assigned|datetime_and_since:task.created }}{% endif %}</td>
</tr>
</table>

{% if logs %}
<h2>{% trans "Logs" %}</h2>
<table id="task-logs">
<tr><th>{% trans "Timestamp" %}</th>
    <th>{% trans "Message" %}</th>
</tr>
{% for log in logs %}
<tr><td><span title="+{{ log.created|since:task.created }}">{{ log.created|datetime_relative:task.created }}</span></td>
    <td>{{ log }}</td>
</tr>
{% endfor %}
</table>
{% endif %}

</div>
{% endblock %}

